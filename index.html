<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Beer Editor</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0/angular.min.js"></script>
  <script src="https://rawgit.com/homebrewing/brauhausjs/master/dist/brauhaus.min.js"></script>
  <script src="https://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-1.3.2.js"></script>
  <script src="angular-brauhaus.js"></script>
  <script src="beer-editor.js"></script>
  <script src="app.js"></script>
</head>
<body ng-controller="BeerEditorController">

<div class="container">

  <div class="text-right">
    <button class="btn btn-sm btn-danger" ng-click="clear()">Effacer</button>
  </div>

  <div class="form-group">
    <input placeholder="Titre" ng-model="recipe.name" class="form-control input-lg" />
  </div>

  <div class="row">
    <div class="col-xs-6">
      <label>Volume final</label>
      <div class="form-group">
        <div class="input-group">
          <input type="number" ng-model="recipe.batchSize" class="form-control" />
          <span class="input-group-addon">L</span>
        </div>
      </div>
    </div>
    <div class="col-xs-6">
      <label>Durée de l'ébullition</label>
      <div class="form-group">
        <div class="input-group">
          <input type="number" ng-model="recipe.boil_time" class="form-control"/>
          <span class="input-group-addon">mn</span>
        </div>
      </div>
    </div>
    <div class="col-xs-6">
      <label>Volume ébu</label>
      <div class="form-group">
        <div class="input-group">
          <span ng-bind="calculations.boilSize" class="form-control" disabled></span>
          <span class="input-group-addon">L</span>
        </div>
      </div>
    </div>
    <div class="col-xs-6">
      <label>DI</label>
      <div class="form-group">
        <div class="input-group">
          <span ng-bind="calculations.og.toFixed(3)"
                class="form-control" disabled></span>
          <span class="input-group-addon">SG</span>
        </div>
      </div>
    </div>
    <div class="col-xs-6">
      <label>DF</label>
      <div class="form-group">
        <div class="input-group">
          <span ng-bind="calculations.og.toFixed(3)"
                class="form-control" disabled></span>
          <span class="input-group-addon">SG</span>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <span uib-dropdown>
        <button class="btn btn-warning" uib-dropdown-toggle>
          Malt <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" uib-dropdown-menu>
          <li role="menuitem" ng-repeat="f in fermentables">
            <a href="#" ng-click="recipe.fermentables.push(f);"
               ng-bind="f.name"></a></li>
        </ul>
      </span>
      <span uib-dropdown>
        <button class="btn btn-success" uib-dropdown-toggle>
          Houblon <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" uib-dropdown-menu>
          <li role="menuitem" ng-repeat="s in spices">
            <a href="#" ng-click="recipe.spices.push(s);"
               ng-bind="s.name"></a></li>
        </ul>
      </span>
    </div>
  </div>
  
  <table class="table" ng-show="recipe.fermentables.length + recipe.spices.length > 0">
    <thead>
      <th>Nom</th>
      <th>Poids</th>
    </thead>
    <tbody>
      <tr ng-repeat="f in recipe.fermentables">
        <td>{{ f.name }}</td>
        <td>{{ f.weight }}</td>
      </tr>
      <tr ng-repeat="s in recipe.spices">
        <td>{{ s.name }}</td>
        <td>{{ s.weight }}</td>
      </tr>
    </tbody>
  </table>

  <h2>Équipement</h2>

  <label>Taux d'évaporation</label>
  <div class="form-group">
    <div class="input-group">
      <input type="number" ng-model="equipment.boil_rate" class="form-control" />
      <span class="input-group-addon">%/h</span>
    </div>
  </div>

  <pre>{{ calculations | bhDebug }}</pre>
  <pre>{{ calculations }}</pre>
  <pre>{{ fermentables }}</pre>
  <pre><span ng-repeat="f in fermentables">{
  "type": "{{f[0]}}",
  "name": "{{f[1]}}",
  "yield": {{Brauhaus.ppgToYield(f[2]).toFixed(0)}},
  "color": {{Brauhaus.srmToEbc(f[3]).toFixed(0)}},
},
</span></pre>

</div>


</body>
</html>
